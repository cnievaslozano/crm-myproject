{% extends 'dashboard/plantilla.html.twig' %}
{% block title %}Dashboard Clientes{% endblock %}
{% block stylesheets %}
{{ parent() }}
<style>
	li .empresa {
		flex-basis: 40%;
	}

	li .code {
		flex-basis: 10%;
	}

	li .activo {
		flex-basis: 10%;
	}

	li .ver {
		flex-basis: 10%;
	}

	li .editar {
		flex-basis: 10%;
	}

	li .borrar {
		flex-basis: 10%;
	}

	li .nohay {
		flex-basis: 100%;
	}

</style>
{% endblock %}
{% block contenido %}

<div style="height:160px;"></div>
<div class="container">
	<div class="row">
		<div class="col-12 mb-4">
			{% for flashMessage in app.flashes('success') %}
			<div class="alert alert-success alert-dismissible fade show text-center" role="alert">
				{{ flashMessage }}
				<button type="button" class="btn-close text-center" data-dismiss="alert" aria-label="Close"></button>
			</div>
			{% endfor %}

			{# Mensaje error #}
			{% for flashMessage in app.flashes('error') %}
			<div class="alert alert-danger alert-dismissible fade show text-center" role="alert">
				{{ flashMessage }}
				<button type="button" class="btn-close text-center" data-bs-dismiss="alert" aria-label="Close"></button>
			</div>
			{% endfor %}
			<h5 class="fw-bold">Listado de clientes</h5>
			<a class="btn btn-granota" href="{{ path('empresa_new') }}">Nuevo Cliente +</a>
		</div>

		<div class="col-12">
			<ul class="custom-table">
				{% for empresa in pagination %}
				<li class="table-row">
					<div class="colo colo-1">{{ empresa.id }}</div>
					<div class="colo empresa"><img src="/uploads/logotipos/{{ empresa.imagenLogotipoRuta }}" alt="Logo"
							class="rounded-circle" style="width: 40px; height: 40px; margin-right: 20px;">
						<span class="nombre-empresa-span">{{ empresa.nombre }}</span>
					</div>
					<div class="colo code text-muted">{{ empresa.code }}</div>
					<div class="colo activo">{{ empresa.activo ? '<i class="fa-solid fa-thumbs-up"
							style="color:#99c21e;"></i>' : '<i class="fa-solid fa-thumbs-down" style="color:red;"></i>'
						}}
					</div>
					<div class="colo ver"><a href="{{ path('empresa_show', {'id': empresa.id}) }}">
							<i class="fa-solid fa-eye" style="color:#0d6efd;"></i>
						</a>
					</div>
					<div class="colo editar"><a href="{{ path('empresa_edit', {'id': empresa.id}) }}">
							<i class="fa-solid fa-pen-to-square" style="color:#0d6efd;"></i>
						</a>
					</div>
					<div class="colo borrar">
						<form method="post" action="{{ path('empresa_delete', {'id': empresa.id}) }}"
							onsubmit="return confirm('¿Estás seguro que quieres borrar la empresa {{empresa.nombre}}?');">
							<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ empresa.id) }}">
							<button class="btn">
								<i class="fa-solid fa-trash" style="color:red;"></i>
							</button>
						</form>
					</div>
				</li>
				{% else %}
				<li class="table-row">
					<div class="colo nohay">No hay registros :)</div>
				</li>
				{% endfor %}

			</ul>
		</div>

		<div class="col-12">
			{{ knp_pagination_render(pagination)}}
		</div>
	</div>
</div>

{% endblock %}